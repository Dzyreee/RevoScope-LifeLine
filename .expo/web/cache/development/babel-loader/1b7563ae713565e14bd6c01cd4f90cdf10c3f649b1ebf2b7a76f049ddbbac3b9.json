{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { useApp } from \"../context/AppContext\";\nimport PatientCard from \"../components/PatientCard\";\nimport TriageTabs from \"../components/TriageTabs\";\nimport DeviceSetupModal from \"../components/DeviceSetupModal\";\nimport { Ionicons } from '@expo/vector-icons';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function DashboardScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useApp = useApp(),\n    patients = _useApp.patients,\n    isLoading = _useApp.isLoading;\n  var _useState = useState('P3'),\n    _useState2 = _slicedToArray(_useState, 2),\n    selectedTab = _useState2[0],\n    setSelectedTab = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isSetupVisible = _useState4[0],\n    setIsSetupVisible = _useState4[1];\n  var counts = {\n    P1: patients.filter(function (p) {\n      return p.triage_category === 'P1';\n    }).length,\n    P2: patients.filter(function (p) {\n      return p.triage_category === 'P2';\n    }).length,\n    P3: patients.filter(function (p) {\n      return p.triage_category === 'P3';\n    }).length\n  };\n  var filteredPatients = patients.filter(function (p) {\n    return p.triage_category === selectedTab;\n  });\n  if (isLoading) {\n    return _jsx(View, {\n      style: styles.loading,\n      children: _jsx(Text, {\n        children: \"Loading Triage Data...\"\n      })\n    });\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(TriageTabs, {\n      selectedTab: selectedTab,\n      onTabSelect: setSelectedTab,\n      counts: counts\n    }), _jsx(FlatList, {\n      data: filteredPatients,\n      keyExtractor: function keyExtractor(item) {\n        return item.id.toString();\n      },\n      renderItem: function renderItem(_ref2) {\n        var item = _ref2.item;\n        return _jsx(PatientCard, {\n          patient: item,\n          onPress: function onPress() {\n            return navigation.navigate('Imaging', {\n              patientId: item.id\n            });\n          }\n        });\n      },\n      contentContainerStyle: styles.listContent,\n      ListEmptyComponent: _jsx(View, {\n        style: styles.emptyState,\n        children: _jsxs(Text, {\n          style: styles.emptyText,\n          children: [\"No patients in \", selectedTab]\n        })\n      })\n    }), _jsx(TouchableOpacity, {\n      style: styles.fab,\n      onPress: function onPress() {\n        return navigation.navigate('Intake');\n      },\n      children: _jsx(Text, {\n        style: styles.fabText,\n        children: \"+\"\n      })\n    }), _jsx(TouchableOpacity, {\n      style: styles.setupButton,\n      onPress: function onPress() {\n        return setIsSetupVisible(true);\n      },\n      children: _jsx(Text, {\n        style: styles.setupButtonText,\n        children: \"\\u2699\\uFE0F Audio Input\"\n      })\n    }), _jsx(DeviceSetupModal, {\n      visible: isSetupVisible,\n      onClose: function onClose() {\n        return setIsSetupVisible(false);\n      }\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5'\n  },\n  loading: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  listContent: {\n    padding: 16,\n    paddingBottom: 80\n  },\n  emptyState: {\n    padding: 24,\n    alignItems: 'center'\n  },\n  emptyText: {\n    color: '#757575',\n    fontSize: 16\n  },\n  fab: {\n    position: 'absolute',\n    bottom: 24,\n    right: 24,\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    backgroundColor: '#1976D2',\n    justifyContent: 'center',\n    alignItems: 'center',\n    elevation: 4,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84\n  },\n  fabText: {\n    color: '#fff',\n    fontSize: 32,\n    marginTop: -4\n  },\n  setupButton: {\n    position: 'absolute',\n    bottom: 24,\n    left: 24,\n    backgroundColor: '#fff',\n    paddingHorizontal: 16,\n    paddingVertical: 10,\n    borderRadius: 24,\n    elevation: 3,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 1\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 1.41\n  },\n  setupButtonText: {\n    fontWeight: '600',\n    color: '#333'\n  }\n});","map":{"version":3,"names":["React","useState","View","StyleSheet","FlatList","TouchableOpacity","Text","useApp","PatientCard","TriageTabs","DeviceSetupModal","Ionicons","jsx","_jsx","jsxs","_jsxs","DashboardScreen","_ref","navigation","_useApp","patients","isLoading","_useState","_useState2","_slicedToArray","selectedTab","setSelectedTab","_useState3","_useState4","isSetupVisible","setIsSetupVisible","counts","P1","filter","p","triage_category","length","P2","P3","filteredPatients","style","styles","loading","children","container","onTabSelect","data","keyExtractor","item","id","toString","renderItem","_ref2","patient","onPress","navigate","patientId","contentContainerStyle","listContent","ListEmptyComponent","emptyState","emptyText","fab","fabText","setupButton","setupButtonText","visible","onClose","create","flex","backgroundColor","justifyContent","alignItems","padding","paddingBottom","color","fontSize","position","bottom","right","width","height","borderRadius","elevation","shadowColor","shadowOffset","shadowOpacity","shadowRadius","marginTop","left","paddingHorizontal","paddingVertical","fontWeight"],"sources":["/Users/ae/Revive/SoundScopeAI/triage_dashboard/src/screens/DashboardScreen.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { View, StyleSheet, FlatList, TouchableOpacity, Text } from 'react-native';\nimport { useApp } from '../context/AppContext';\nimport PatientCard from '../components/PatientCard';\nimport TriageTabs from '../components/TriageTabs';\nimport DeviceSetupModal from '../components/DeviceSetupModal';\nimport { Ionicons } from '@expo/vector-icons'; // Ensure @expo/vector-icons works or use standard icons\n\nexport default function DashboardScreen({ navigation }) {\n    const { patients, isLoading } = useApp();\n    const [selectedTab, setSelectedTab] = useState('P3'); // Default to Stable/All or one of them? Prompt says \"Three distinct high-contrast sections\". Tabs work well.\n    const [isSetupVisible, setIsSetupVisible] = useState(false);\n\n    // Derive counts\n    const counts = {\n        P1: patients.filter(p => p.triage_category === 'P1').length,\n        P2: patients.filter(p => p.triage_category === 'P2').length,\n        P3: patients.filter(p => p.triage_category === 'P3').length, // Stable is P3\n    };\n\n    const filteredPatients = patients.filter(p => p.triage_category === selectedTab);\n\n    if (isLoading) {\n        return (\n            <View style={styles.loading}>\n                <Text>Loading Triage Data...</Text>\n            </View>\n        );\n    }\n\n    return (\n        <View style={styles.container}>\n            <TriageTabs\n                selectedTab={selectedTab}\n                onTabSelect={setSelectedTab}\n                counts={counts}\n            />\n\n            <FlatList\n                data={filteredPatients}\n                keyExtractor={item => item.id.toString()}\n                renderItem={({ item }) => (\n                    <PatientCard\n                        patient={item}\n                        onPress={() => navigation.navigate('Imaging', { patientId: item.id })}\n                    />\n                )}\n                contentContainerStyle={styles.listContent}\n                ListEmptyComponent={\n                    <View style={styles.emptyState}>\n                        <Text style={styles.emptyText}>No patients in {selectedTab}</Text>\n                    </View>\n                }\n            />\n\n            <TouchableOpacity\n                style={styles.fab}\n                onPress={() => navigation.navigate('Intake')}\n            >\n                <Text style={styles.fabText}>+</Text>\n            </TouchableOpacity>\n\n            {/* Settings / Device Button in Header usually, but adding a float or corner button here for demo */}\n            <TouchableOpacity\n                style={styles.setupButton}\n                onPress={() => setIsSetupVisible(true)}\n            >\n                <Text style={styles.setupButtonText}>⚙️ Audio Input</Text>\n            </TouchableOpacity>\n\n            <DeviceSetupModal\n                visible={isSetupVisible}\n                onClose={() => setIsSetupVisible(false)}\n            />\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: '#f5f5f5',\n    },\n    loading: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    listContent: {\n        padding: 16,\n        paddingBottom: 80,\n    },\n    emptyState: {\n        padding: 24,\n        alignItems: 'center',\n    },\n    emptyText: {\n        color: '#757575',\n        fontSize: 16,\n    },\n    fab: {\n        position: 'absolute',\n        bottom: 24,\n        right: 24,\n        width: 56,\n        height: 56,\n        borderRadius: 28,\n        backgroundColor: '#1976D2',\n        justifyContent: 'center',\n        alignItems: 'center',\n        elevation: 4,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.25,\n        shadowRadius: 3.84,\n    },\n    fabText: {\n        color: '#fff',\n        fontSize: 32,\n        marginTop: -4,\n    },\n    setupButton: {\n        position: 'absolute',\n        bottom: 24,\n        left: 24,\n        backgroundColor: '#fff',\n        paddingHorizontal: 16,\n        paddingVertical: 10,\n        borderRadius: 24,\n        elevation: 3,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 1 },\n        shadowOpacity: 0.2,\n        shadowRadius: 1.41,\n    },\n    setupButtonText: {\n        fontWeight: '600',\n        color: '#333',\n    }\n\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}