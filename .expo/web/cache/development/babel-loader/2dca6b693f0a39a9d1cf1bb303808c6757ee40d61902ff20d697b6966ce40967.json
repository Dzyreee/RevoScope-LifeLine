{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { Audio } from 'expo-av';\nexport var requestAudioPermissions = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var _yield$Audio$requestP = yield Audio.requestPermissionsAsync(),\n      status = _yield$Audio$requestP.status;\n    return status === 'granted';\n  });\n  return function requestAudioPermissions() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var startAudioStream = function () {\n  var _ref2 = _asyncToGenerator(function* (callback) {\n    try {\n      var recording = new Audio.Recording();\n      yield recording.prepareToRecordAsync(Audio.RecordingOptionsPresets.HIGH_QUALITY);\n      recording.setOnRecordingStatusUpdate(function (status) {\n        if (callback) {\n          var metering = status.metering || -160;\n          callback(metering);\n        }\n      });\n      yield recording.startAsync();\n      return recording;\n    } catch (error) {\n      console.error('Failed to start recording', error);\n      return null;\n    }\n  });\n  return function startAudioStream(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var stopAudioStream = function () {\n  var _ref3 = _asyncToGenerator(function* (recording) {\n    if (recording) {\n      yield recording.stopAndUnloadAsync();\n    }\n  });\n  return function stopAudioStream(_x2) {\n    return _ref3.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["Audio","requestAudioPermissions","_ref","_asyncToGenerator","_yield$Audio$requestP","requestPermissionsAsync","status","apply","arguments","startAudioStream","_ref2","callback","recording","Recording","prepareToRecordAsync","RecordingOptionsPresets","HIGH_QUALITY","setOnRecordingStatusUpdate","metering","startAsync","error","console","_x","stopAudioStream","_ref3","stopAndUnloadAsync","_x2"],"sources":["/Users/ae/Revive/SoundScopeAI/triage_dashboard/src/services/AudioService.js"],"sourcesContent":["import { Audio } from 'expo-av';\n\nexport const requestAudioPermissions = async () => {\n    const { status } = await Audio.requestPermissionsAsync();\n    return status === 'granted';\n};\n\nexport const startAudioStream = async (callback) => {\n    try {\n        const recording = new Audio.Recording();\n        await recording.prepareToRecordAsync(Audio.RecordingOptionsPresets.HIGH_QUALITY);\n\n        recording.setOnRecordingStatusUpdate(status => {\n            if (callback) {\n                // Normalize metering to 0-1 range roughly, or just pass db value\n                // metering is usually -160 to 0 dB\n                const metering = status.metering || -160;\n                callback(metering);\n            }\n        });\n\n        await recording.startAsync();\n        return recording;\n    } catch (error) {\n        console.error('Failed to start recording', error);\n        return null;\n    }\n};\n\nexport const stopAudioStream = async (recording) => {\n    if (recording) {\n        await recording.stopAndUnloadAsync();\n    }\n};\n"],"mappings":";AAAA,SAASA,KAAK,QAAQ,SAAS;AAE/B,OAAO,IAAMC,uBAAuB;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,aAAY;IAC/C,IAAAC,qBAAA,SAAyBJ,KAAK,CAACK,uBAAuB,CAAC,CAAC;MAAhDC,MAAM,GAAAF,qBAAA,CAANE,MAAM;IACd,OAAOA,MAAM,KAAK,SAAS;EAC/B,CAAC;EAAA,gBAHYL,uBAAuBA,CAAA;IAAA,OAAAC,IAAA,CAAAK,KAAA,OAAAC,SAAA;EAAA;AAAA,GAGnC;AAED,OAAO,IAAMC,gBAAgB;EAAA,IAAAC,KAAA,GAAAP,iBAAA,CAAG,WAAOQ,QAAQ,EAAK;IAChD,IAAI;MACA,IAAMC,SAAS,GAAG,IAAIZ,KAAK,CAACa,SAAS,CAAC,CAAC;MACvC,MAAMD,SAAS,CAACE,oBAAoB,CAACd,KAAK,CAACe,uBAAuB,CAACC,YAAY,CAAC;MAEhFJ,SAAS,CAACK,0BAA0B,CAAC,UAAAX,MAAM,EAAI;QAC3C,IAAIK,QAAQ,EAAE;UAGV,IAAMO,QAAQ,GAAGZ,MAAM,CAACY,QAAQ,IAAI,CAAC,GAAG;UACxCP,QAAQ,CAACO,QAAQ,CAAC;QACtB;MACJ,CAAC,CAAC;MAEF,MAAMN,SAAS,CAACO,UAAU,CAAC,CAAC;MAC5B,OAAOP,SAAS;IACpB,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjD,OAAO,IAAI;IACf;EACJ,CAAC;EAAA,gBApBYX,gBAAgBA,CAAAa,EAAA;IAAA,OAAAZ,KAAA,CAAAH,KAAA,OAAAC,SAAA;EAAA;AAAA,GAoB5B;AAED,OAAO,IAAMe,eAAe;EAAA,IAAAC,KAAA,GAAArB,iBAAA,CAAG,WAAOS,SAAS,EAAK;IAChD,IAAIA,SAAS,EAAE;MACX,MAAMA,SAAS,CAACa,kBAAkB,CAAC,CAAC;IACxC;EACJ,CAAC;EAAA,gBAJYF,eAAeA,CAAAG,GAAA;IAAA,OAAAF,KAAA,CAAAjB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAI3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}