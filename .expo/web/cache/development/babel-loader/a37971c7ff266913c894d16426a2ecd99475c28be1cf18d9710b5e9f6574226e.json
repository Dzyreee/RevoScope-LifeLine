{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport * as ImagePicker from 'expo-image-picker';\nimport { useApp } from \"../context/AppContext\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function PatientIntakeScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useApp = useApp(),\n    addNewPatient = _useApp.addNewPatient;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    name = _useState2[0],\n    setName = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    age = _useState4[0],\n    setAge = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    complaint = _useState6[0],\n    setComplaint = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    photo = _useState8[0],\n    setPhoto = _useState8[1];\n  var takePhoto = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var permissionResult = yield ImagePicker.requestCameraPermissionsAsync();\n      if (permissionResult.granted === false) {\n        alert(\"You've refused to allow this app into your camera!\");\n        return;\n      }\n      var result = yield ImagePicker.launchCameraAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        quality: 0.5\n      });\n      if (!result.canceled) {\n        setPhoto(result.assets[0].uri);\n      }\n    });\n    return function takePhoto() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleSave = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (!name || !complaint) {\n        Alert.alert(\"Missing Info\", \"Please ensure Name and Chief Complaint are filled.\");\n        return;\n      }\n      try {\n        yield addNewPatient({\n          name: name,\n          estimated_age: age ? parseInt(age) : null,\n          chief_complaint: complaint,\n          photo_uri: photo,\n          triage_category: 'P3'\n        });\n        navigation.goBack();\n      } catch (e) {\n        Alert.alert(\"Error\", \"Could not save patient.\");\n      }\n    });\n    return function handleSave() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsxs(ScrollView, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.header,\n      children: \"New Patient Entry\"\n    }), _jsx(TouchableOpacity, {\n      style: styles.photoButton,\n      onPress: takePhoto,\n      children: photo ? _jsx(Image, {\n        source: {\n          uri: photo\n        },\n        style: styles.photo\n      }) : _jsx(View, {\n        style: styles.photoPlaceholder,\n        children: _jsx(Text, {\n          style: styles.photoText,\n          children: \"Tap to Take Photo\"\n        })\n      })\n    }), _jsx(Text, {\n      style: styles.label,\n      children: \"Full Name / ID\"\n    }), _jsx(TextInput, {\n      style: styles.input,\n      value: name,\n      onChangeText: setName,\n      placeholder: \"Unknown Subject\"\n    }), _jsx(Text, {\n      style: styles.label,\n      children: \"Estimated Age\"\n    }), _jsx(TextInput, {\n      style: styles.input,\n      value: age,\n      onChangeText: setAge,\n      keyboardType: \"numeric\",\n      placeholder: \"e.g. 35\"\n    }), _jsx(Text, {\n      style: styles.label,\n      children: \"Chief Complaint / Injury\"\n    }), _jsx(TextInput, {\n      style: [styles.input, styles.textArea],\n      value: complaint,\n      onChangeText: setComplaint,\n      multiline: true,\n      numberOfLines: 3,\n      placeholder: \"Brief description of injury\"\n    }), _jsx(View, {\n      style: styles.buttonContainer,\n      children: _jsx(Button, {\n        title: \"Save Profile (Enable Scan)\",\n        onPress: handleSave\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20,\n    backgroundColor: '#fff'\n  },\n  header: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 20,\n    color: '#333'\n  },\n  photoButton: {\n    alignSelf: 'center',\n    marginBottom: 20\n  },\n  photo: {\n    width: 150,\n    height: 150,\n    borderRadius: 75\n  },\n  photoPlaceholder: {\n    width: 150,\n    height: 150,\n    borderRadius: 75,\n    backgroundColor: '#e0e0e0',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: '#ccc',\n    borderStyle: 'dashed'\n  },\n  photoText: {\n    color: '#757575'\n  },\n  label: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginBottom: 8,\n    color: '#333'\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#ccc',\n    borderRadius: 8,\n    padding: 12,\n    fontSize: 16,\n    marginBottom: 16,\n    backgroundColor: '#fafafa'\n  },\n  textArea: {\n    height: 80,\n    textAlignVertical: 'top'\n  },\n  buttonContainer: {\n    marginTop: 20,\n    marginBottom: 40\n  }\n});","map":{"version":3,"names":["React","useState","View","Text","TextInput","StyleSheet","Button","ScrollView","Image","TouchableOpacity","Alert","ImagePicker","useApp","jsx","_jsx","jsxs","_jsxs","PatientIntakeScreen","_ref","navigation","_useApp","addNewPatient","_useState","_useState2","_slicedToArray","name","setName","_useState3","_useState4","age","setAge","_useState5","_useState6","complaint","setComplaint","_useState7","_useState8","photo","setPhoto","takePhoto","_ref2","_asyncToGenerator","permissionResult","requestCameraPermissionsAsync","granted","alert","result","launchCameraAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","quality","canceled","assets","uri","apply","arguments","handleSave","_ref3","estimated_age","parseInt","chief_complaint","photo_uri","triage_category","goBack","e","style","styles","container","children","header","photoButton","onPress","source","photoPlaceholder","photoText","label","input","value","onChangeText","placeholder","keyboardType","textArea","multiline","numberOfLines","buttonContainer","title","create","flex","padding","backgroundColor","fontSize","fontWeight","marginBottom","color","alignSelf","width","height","borderRadius","justifyContent","alignItems","borderWidth","borderColor","borderStyle","textAlignVertical","marginTop"],"sources":["/Users/ae/Revive/SoundScopeAI/triage_dashboard/src/screens/PatientIntakeScreen.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { View, Text, TextInput, StyleSheet, Button, ScrollView, Image, TouchableOpacity, Alert } from 'react-native';\nimport * as ImagePicker from 'expo-image-picker';\nimport { useApp } from '../context/AppContext';\n\nexport default function PatientIntakeScreen({ navigation }) {\n    const { addNewPatient } = useApp();\n\n    const [name, setName] = useState('');\n    const [age, setAge] = useState('');\n    const [complaint, setComplaint] = useState('');\n    const [photo, setPhoto] = useState(null);\n\n    const takePhoto = async () => {\n        const permissionResult = await ImagePicker.requestCameraPermissionsAsync();\n\n        if (permissionResult.granted === false) {\n            alert(\"You've refused to allow this app into your camera!\");\n            return;\n        }\n\n        const result = await ImagePicker.launchCameraAsync({\n            mediaTypes: ImagePicker.MediaTypeOptions.Images,\n            allowsEditing: true,\n            quality: 0.5,\n            // base64: true, // if we wanted base64\n        });\n\n        if (!result.canceled) {\n            setPhoto(result.assets[0].uri);\n        }\n    };\n\n    const handleSave = async () => {\n        if (!name || !complaint) {\n            Alert.alert(\"Missing Info\", \"Please ensure Name and Chief Complaint are filled.\");\n            return;\n        }\n\n        try {\n            await addNewPatient({\n                name,\n                estimated_age: age ? parseInt(age) : null,\n                chief_complaint: complaint,\n                photo_uri: photo,\n                triage_category: 'P3' // Default to stable until scanned\n            });\n            // Navigate back or to Scan?\n            // Prompt implies \"Pre-Scan Saving... before 'Perform Scan' button becomes active\".\n            // We can navigate back to Dashboard or a PatientDetail screen.\n            // For now, let's go back to Dashboard.\n            navigation.goBack();\n        } catch (e) {\n            Alert.alert(\"Error\", \"Could not save patient.\");\n        }\n    };\n\n    return (\n        <ScrollView style={styles.container}>\n            <Text style={styles.header}>New Patient Entry</Text>\n\n            <TouchableOpacity style={styles.photoButton} onPress={takePhoto}>\n                {photo ? (\n                    <Image source={{ uri: photo }} style={styles.photo} />\n                ) : (\n                    <View style={styles.photoPlaceholder}>\n                        <Text style={styles.photoText}>Tap to Take Photo</Text>\n                    </View>\n                )}\n            </TouchableOpacity>\n\n            <Text style={styles.label}>Full Name / ID</Text>\n            <TextInput\n                style={styles.input}\n                value={name}\n                onChangeText={setName}\n                placeholder=\"Unknown Subject\"\n            />\n\n            <Text style={styles.label}>Estimated Age</Text>\n            <TextInput\n                style={styles.input}\n                value={age}\n                onChangeText={setAge}\n                keyboardType=\"numeric\"\n                placeholder=\"e.g. 35\"\n            />\n\n            <Text style={styles.label}>Chief Complaint / Injury</Text>\n            <TextInput\n                style={[styles.input, styles.textArea]}\n                value={complaint}\n                onChangeText={setComplaint}\n                multiline\n                numberOfLines={3}\n                placeholder=\"Brief description of injury\"\n            />\n\n            <View style={styles.buttonContainer}>\n                <Button title=\"Save Profile (Enable Scan)\" onPress={handleSave} />\n            </View>\n        </ScrollView>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        padding: 20,\n        backgroundColor: '#fff',\n    },\n    header: {\n        fontSize: 24,\n        fontWeight: 'bold',\n        marginBottom: 20,\n        color: '#333',\n    },\n    photoButton: {\n        alignSelf: 'center',\n        marginBottom: 20,\n    },\n    photo: {\n        width: 150,\n        height: 150,\n        borderRadius: 75,\n    },\n    photoPlaceholder: {\n        width: 150,\n        height: 150,\n        borderRadius: 75,\n        backgroundColor: '#e0e0e0',\n        justifyContent: 'center',\n        alignItems: 'center',\n        borderWidth: 1,\n        borderColor: '#ccc',\n        borderStyle: 'dashed',\n    },\n    photoText: {\n        color: '#757575',\n    },\n    label: {\n        fontSize: 16,\n        fontWeight: '600',\n        marginBottom: 8,\n        color: '#333',\n    },\n    input: {\n        borderWidth: 1,\n        borderColor: '#ccc',\n        borderRadius: 8,\n        padding: 12,\n        fontSize: 16,\n        marginBottom: 16,\n        backgroundColor: '#fafafa',\n    },\n    textArea: {\n        height: 80,\n        textAlignVertical: 'top',\n    },\n    buttonContainer: {\n        marginTop: 20,\n        marginBottom: 40,\n    },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}