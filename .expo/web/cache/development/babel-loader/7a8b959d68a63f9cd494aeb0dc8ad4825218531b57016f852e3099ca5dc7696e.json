{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { initDB, getPatients, addPatient as addPatientToDB, updatePatientCategory } from \"../services/DatabaseService\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar AppContext = createContext();\nexport var AppProvider = function AppProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    patients = _useState2[0],\n    setPatients = _useState2[1];\n  var _useState3 = useState('internal'),\n    _useState4 = _slicedToArray(_useState3, 2),\n    audioSource = _useState4[0],\n    setAudioSource = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isLoading = _useState6[0],\n    setIsLoading = _useState6[1];\n  useEffect(function () {\n    var loadData = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          yield initDB();\n          var storedPatients = yield getPatients();\n          setPatients(storedPatients);\n        } catch (error) {\n          console.error(\"Failed to init DB or load patients\", error);\n        } finally {\n          setIsLoading(false);\n        }\n      });\n      return function loadData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    loadData();\n  }, []);\n  var refreshPatients = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var storedPatients = yield getPatients();\n        setPatients(storedPatients);\n      } catch (error) {\n        console.error(\"Failed to refresh patients\", error);\n      }\n    });\n    return function refreshPatients() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var notifyScanComplete = function () {\n    var _ref4 = _asyncToGenerator(function* (patientId, diagnosticResult) {\n      yield refreshPatients();\n    });\n    return function notifyScanComplete(_x, _x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var addNewPatient = function () {\n    var _ref5 = _asyncToGenerator(function* (patientData) {\n      try {\n        yield addPatientToDB(patientData);\n        yield refreshPatients();\n      } catch (error) {\n        console.error(\"Failed to add patient\", error);\n        throw error;\n      }\n    });\n    return function addNewPatient(_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var movePatientToCategory = function () {\n    var _ref6 = _asyncToGenerator(function* (patientId, category) {\n      try {\n        yield updatePatientCategory(patientId, category);\n        yield refreshPatients();\n      } catch (error) {\n        console.error(\"Failed to move patient\", error);\n      }\n    });\n    return function movePatientToCategory(_x4, _x5) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  return _jsx(AppContext.Provider, {\n    value: {\n      patients: patients,\n      isLoading: isLoading,\n      addNewPatient: addNewPatient,\n      refreshPatients: refreshPatients,\n      audioSource: audioSource,\n      setAudioSource: setAudioSource,\n      movePatientToCategory: movePatientToCategory\n    },\n    children: children\n  });\n};\nexport var useApp = function useApp() {\n  return useContext(AppContext);\n};","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","initDB","getPatients","addPatient","addPatientToDB","updatePatientCategory","jsx","_jsx","AppContext","AppProvider","_ref","children","_useState","_useState2","_slicedToArray","patients","setPatients","_useState3","_useState4","audioSource","setAudioSource","_useState5","_useState6","isLoading","setIsLoading","loadData","_ref2","_asyncToGenerator","storedPatients","error","console","apply","arguments","refreshPatients","_ref3","notifyScanComplete","_ref4","patientId","diagnosticResult","_x","_x2","addNewPatient","_ref5","patientData","_x3","movePatientToCategory","_ref6","category","_x4","_x5","Provider","value","useApp"],"sources":["/Users/ae/Revive/SoundScopeAI/triage_dashboard/src/context/AppContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { initDB, getPatients, addPatient as addPatientToDB, updatePatientCategory } from '../services/DatabaseService';\n\nconst AppContext = createContext();\n\nexport const AppProvider = ({ children }) => {\n    const [patients, setPatients] = useState([]);\n    const [audioSource, setAudioSource] = useState('internal'); // 'internal' | 'external'\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        const loadData = async () => {\n            try {\n                await initDB();\n                const storedPatients = await getPatients();\n                setPatients(storedPatients);\n            } catch (error) {\n                console.error(\"Failed to init DB or load patients\", error);\n            } finally {\n                setIsLoading(false);\n            }\n        };\n        loadData();\n    }, []);\n\n    const refreshPatients = async () => {\n        try {\n            const storedPatients = await getPatients();\n            setPatients(storedPatients);\n        } catch (error) {\n            console.error(\"Failed to refresh patients\", error);\n        }\n    };\n\n    const notifyScanComplete = async (patientId, diagnosticResult) => {\n        // Logic to update patient with scan result could go here\n        // For now we might just want to refresh\n        await refreshPatients();\n    };\n\n    const addNewPatient = async (patientData) => {\n        try {\n            await addPatientToDB(patientData);\n            await refreshPatients();\n        } catch (error) {\n            console.error(\"Failed to add patient\", error);\n            throw error;\n        }\n    }\n\n    const movePatientToCategory = async (patientId, category) => {\n        try {\n            await updatePatientCategory(patientId, category);\n            await refreshPatients();\n        } catch (error) {\n            console.error(\"Failed to move patient\", error);\n        }\n    }\n\n    return (\n        <AppContext.Provider\n            value={{\n                patients,\n                isLoading,\n                addNewPatient,\n                refreshPatients,\n                audioSource,\n                setAudioSource,\n                movePatientToCategory\n            }}\n        >\n            {children}\n        </AppContext.Provider>\n    );\n};\n\nexport const useApp = () => useContext(AppContext);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}